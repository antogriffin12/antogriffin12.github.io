{
  "config": {
    "view": {"continuousWidth": 300, "continuousHeight": 300, "strokeWidth": 0},
    "axis": {"gridOpacity": 0.3, "labelFontSize": 11, "titleFontSize": 12}
  },
  "layer": [
    {
      "data": {"name": "data-022f3e0bc75d89cb87721e800594fb2a"},
      "mark": {"type": "rect", "color": "red", "opacity": 0.15},
      "encoding": {
        "x": {
          "field": "start",
          "scale": {"domain": [1994, 2022]},
          "type": "quantitative"
        },
        "x2": {"field": "end"}
      }
    },
    {
      "data": {"name": "data-e3ebb1b1880171318d56d97923bb5658"},
      "mark": {"type": "area", "color": "red", "opacity": 0.3},
      "encoding": {
        "tooltip": [
          {
            "field": "year",
            "format": "d",
            "title": "Year",
            "type": "quantitative"
          },
          {
            "field": "excess",
            "format": ",",
            "title": "Excess Deaths",
            "type": "quantitative"
          }
        ],
        "x": {
          "field": "year",
          "scale": {"domain": [1994, 2022]},
          "type": "quantitative"
        },
        "y": {
          "field": "expected",
          "scale": {"domain": [70000, 140000]},
          "type": "quantitative"
        },
        "y2": {"field": "actual"}
      }
    },
    {
      "data": {"name": "data-1120b9e135a661f0db572a588482bdfc"},
      "mark": {
        "type": "line",
        "color": "steelblue",
        "size": 2.5,
        "strokeDash": [5, 5]
      },
      "encoding": {
        "tooltip": [
          {
            "field": "year",
            "format": "d",
            "title": "Year",
            "type": "quantitative"
          },
          {
            "field": "expected",
            "format": ",",
            "title": "Expected Deaths",
            "type": "quantitative"
          }
        ],
        "x": {
          "axis": {"format": "d", "tickCount": 29},
          "field": "year",
          "scale": {"domain": [1994, 2022]},
          "title": "Year",
          "type": "quantitative"
        },
        "y": {
          "field": "expected",
          "scale": {"domain": [70000, 140000]},
          "title": "Annual Deaths",
          "type": "quantitative"
        }
      }
    },
    {
      "data": {"name": "data-1120b9e135a661f0db572a588482bdfc"},
      "mark": {
        "type": "line",
        "color": "darkred",
        "point": {"color": "darkred", "filled": true, "size": 80},
        "size": 3
      },
      "encoding": {
        "tooltip": [
          {
            "field": "year",
            "format": "d",
            "title": "Year",
            "type": "quantitative"
          },
          {
            "field": "actual",
            "format": ",",
            "title": "Actual Deaths",
            "type": "quantitative"
          },
          {
            "field": "expected",
            "format": ",",
            "title": "Expected Deaths",
            "type": "quantitative"
          },
          {
            "field": "excess",
            "format": ",",
            "title": "Excess Deaths",
            "type": "quantitative"
          }
        ],
        "x": {
          "axis": {"format": "d", "tickCount": 29},
          "field": "year",
          "scale": {"domain": [1994, 2022]},
          "title": "Year",
          "type": "quantitative"
        },
        "y": {
          "field": "actual",
          "scale": {"domain": [70000, 140000]},
          "type": "quantitative"
        }
      }
    }
  ],
  "height": 400,
  "title": {
    "text": "COVID-19 Mortality Shock in Chile",
    "subtitle": [
      "De-trended Analysis with Excess Death Calculation (1994-2022)",
      "Total Excess Deaths: 69,633 (+21.0%) | Peak: 2021 (137,627 deaths)",
      "Regression Model: y = 1363.7x + -2645709.8 (RÂ² = 0.960, p < 0.001)"
    ],
    "fontSize": 16,
    "subtitleFontSize": 12,
    "subtitleColor": "#555"
  },
  "width": 700,
  "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json",
  "datasets": {
    "data-022f3e0bc75d89cb87721e800594fb2a": [{"start": 2019.5, "end": 2022.5}],
    "data-e3ebb1b1880171318d56d97923bb5658": [
      {
        "year": 2020,
        "actual": 126160,
        "expected": 109009,
        "excess": 17150,
        "period": "COVID",
        "is_covid": true
      },
      {
        "year": 2021,
        "actual": 137627,
        "expected": 110373,
        "excess": 27253,
        "period": "COVID",
        "is_covid": true
      },
      {
        "year": 2022,
        "actual": 136966,
        "expected": 111736,
        "excess": 25229,
        "period": "COVID",
        "is_covid": true
      }
    ],
    "data-1120b9e135a661f0db572a588482bdfc": [
      {
        "year": 1994,
        "actual": 75416,
        "expected": 73552,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 1995,
        "actual": 78511,
        "expected": 74916,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 1996,
        "actual": 79109,
        "expected": 76280,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 1997,
        "actual": 78461,
        "expected": 77643,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 1998,
        "actual": 80243,
        "expected": 79007,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 1999,
        "actual": 81964,
        "expected": 80371,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2000,
        "actual": 78796,
        "expected": 81735,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2001,
        "actual": 81858,
        "expected": 83098,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2002,
        "actual": 81071,
        "expected": 84462,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2003,
        "actual": 83657,
        "expected": 85826,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2004,
        "actual": 86128,
        "expected": 87189,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2005,
        "actual": 86096,
        "expected": 88553,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2006,
        "actual": 85633,
        "expected": 89917,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2007,
        "actual": 92996,
        "expected": 91281,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2008,
        "actual": 90164,
        "expected": 92644,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2009,
        "actual": 91965,
        "expected": 94008,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2010,
        "actual": 97927,
        "expected": 95372,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2011,
        "actual": 94982,
        "expected": 96735,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2012,
        "actual": 98710,
        "expected": 98099,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2013,
        "actual": 99767,
        "expected": 99463,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2014,
        "actual": 101949,
        "expected": 100827,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2015,
        "actual": 103318,
        "expected": 102190,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2016,
        "actual": 104023,
        "expected": 103554,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2017,
        "actual": 106387,
        "expected": 104918,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2018,
        "actual": 106793,
        "expected": 106282,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2019,
        "actual": 109656,
        "expected": 107645,
        "excess": null,
        "period": "Pre-COVID",
        "is_covid": false
      },
      {
        "year": 2020,
        "actual": 126160,
        "expected": 109009,
        "excess": 17150,
        "period": "COVID",
        "is_covid": true
      },
      {
        "year": 2021,
        "actual": 137627,
        "expected": 110373,
        "excess": 27253,
        "period": "COVID",
        "is_covid": true
      },
      {
        "year": 2022,
        "actual": 136966,
        "expected": 111736,
        "excess": 25229,
        "period": "COVID",
        "is_covid": true
      }
    ]
  }
}